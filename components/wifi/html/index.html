<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>æ™ºèƒ½å®¶å±…æ§åˆ¶ç³»ç»Ÿ</title>
<style>
body{font-family:Arial,sans-serif;margin:0;padding:20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);}
.container{max-width:800px;margin:0 auto;background:white;border-radius:15px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,0.3);}
h1{color:#667eea;text-align:center;margin-bottom:30px;}
.card{background:#f8f9fa;border-radius:10px;padding:20px;margin-bottom:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
.card h2{color:#764ba2;margin-top:0;}
.sensor-value{font-size:24px;font-weight:bold;color:#667eea;margin:10px 0;}
.control-btn{background:#667eea;color:white;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;font-size:16px;margin:5px;transition:all 0.3s;}
.control-btn:hover{background:#764ba2;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.2);}
.control-btn.off{background:#ccc;}
.slider{width:100%;height:8px;border-radius:5px;background:#ddd;outline:none;}
</style>
</head>
<body>
<div class='container'>
<h1>ğŸ  æ™ºèƒ½å®¶å±…æ§åˆ¶ç³»ç»Ÿ</h1>
<div class='card'>
<h2>ğŸ“Š ç¯å¢ƒç›‘æµ‹</h2>
<div>æ¸©åº¦: <span class='sensor-value' id='temp'>--</span> Â°C</div>
<div>æ¹¿åº¦: <span class='sensor-value' id='humi'>--</span> %</div>
<div>å…‰ç…§: <span class='sensor-value' id='light'>--</span> lux</div>
<div>çƒŸé›¾: <span class='sensor-value' id='smoke'>--</span></div>
</div>
<div class='card'>
<h2>ğŸ’¡ è®¾å¤‡æ§åˆ¶</h2>
<button class='control-btn' id='ledBtn' onclick='toggleLED()'>LED: OFF</button>
<button class='control-btn' id='fanBtn' onclick='toggleFan()'>é£æ‰‡: OFF</button>
<button class='control-btn' id='curtainBtn' onclick='toggleCurtain()'>çª—å¸˜: CLOSED</button>
<div style='margin-top:20px;'>
<label>LEDäº®åº¦: <span id='brightness'>0</span></label>
<input type='range' min='0' max='255' value='0' class='slider' id='brightnessSlider' oninput='setBrightness(this.value)'>
</div>
<div style='margin-top:20px;'>
<label>é£æ‰‡é€Ÿåº¦: <span id='fanSpeed'>0</span></label>
<input type='range' min='0' max='255' value='0' class='slider' id='fanSpeedSlider' oninput='setFanSpeed(this.value)'>
</div>
</div>
</div>
<script>
function updateData(){
fetch('/api/data').then(r=>r.json()).then(d=>{
document.getElementById('temp').innerText=d.temperature.toFixed(1);
document.getElementById('humi').innerText=d.humidity.toFixed(1);
document.getElementById('light').innerText=d.light.toFixed(1);
document.getElementById('smoke').innerText=d.smoke;
document.getElementById('ledBtn').innerText='LED: '+(d.led_state?'ON':'OFF');
document.getElementById('ledBtn').className='control-btn'+(d.led_state?'':' off');
document.getElementById('fanBtn').innerText='é£æ‰‡: '+(d.fan_state?'ON':'OFF');
document.getElementById('fanBtn').className='control-btn'+(d.fan_state?'':' off');
document.getElementById('curtainBtn').innerText='çª—å¸˜: '+(d.curtain_state?'OPEN':'CLOSED');
document.getElementById('curtainBtn').className='control-btn'+(d.curtain_state?'':' off');
document.getElementById('brightness').innerText=d.led_brightness;
document.getElementById('brightnessSlider').value=d.led_brightness;
document.getElementById('fanSpeed').innerText=d.fan_speed;
document.getElementById('fanSpeedSlider').value=d.fan_speed;
});}
function toggleLED(){fetch('/api/led/toggle').then(()=>updateData());}
function toggleFan(){fetch('/api/fan/toggle').then(()=>updateData());}
function toggleCurtain(){fetch('/api/curtain/toggle').then(()=>updateData());}
function setBrightness(v){fetch('/api/led/brightness?value='+v).then(()=>updateData());}
function setFanSpeed(v){fetch('/api/fan/speed?value='+v).then(()=>updateData());}
setInterval(updateData,2000);updateData();
</script>
</body>
</html>
